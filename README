SSL driver for NaviServer 4.99.5
Release 0.3
vlad@crystalballinc.com
neumann@wu-wien.ac.at

This is NaviServer module that implements HTTP over SSL support and
adds new ns_ssl command.

New in Version 0.2:
 - Made driver fully asynchronous, supporting parital read and writes
 - Performance improvements: E.g. support for TCP_CORK and deferaccept
 - Strengthen security against BEAST and CRIME attack

New in Version 0.3:
 - ns_ssl working with asynchronous I/O
 - ns_ssl: spooling of large content to a file instead of memory
 - requires NaviServer 4.99.6

/*--------------------------------------------------------------------*/


 Configuration

   nsd.tcl

   ns_section    ns/server/${servername}/modules
   ns_param      nsssl        		nsssl.so

   ns_section    ns/server/${servername}/module/nsssl
   ns_param	 certificate 		/usr/local/ns/modules/nsssl/server.pem
   ns_param      address    		0.0.0.0
   ns_param      port       		443
   ns_param      ciphers                "RC4:HIGH:!aNULL:!MD5;"
   ns_param      protocols              "!SSLv2"
   ns_param      verify                 0

  certificate is required and will not run without it, it should contain cert and privkey

  ciphers parameter defines which ciphers will be used, by default nsssl uses all ciphers

  protocols parameter defines which protocols can be disabled, options are:
            !SSLv2 !SSLv3 !TLSv1, by default all protocosl are enabled

  verify if set to 1 will reject any connections without valid ceritificate

  all other driver related parameters can be specified, see nssock for more details

 Creating self-signed certificate

  openssl genrsa 1024 > host.key
  openssl req -new -x509 -nodes -sha1 -days 365 -key host.key > host.cert
  cat host.cert host.key > server.pem
  rm -rf host.cert host.key


 Usage

   The module provide additionally the command "ns_ssl" 
   which is the http conterpart to "ns_http". 

    ns_ssl cancel id
    ns_ssl cleanup
    ns_ssl list
    ns_ssl queue ?-method M? ?-headers S? ?-body B? ?-timeout T? ?-cert C? ?-cafile CA? ?-capath CP? ?-verify? -url
    ns_ssl run ?-method M? ?-headers S? ?-body B? ?-timeout T? url
    ns_ssl wait ?-elapsed varName? ?-file varName? ?-headers H? ?-result varName? ?-spoolsize int? ?-status varName? ?-timeout t? id

  See the naviserver documentation of "ns_http" for usage and details about the options.

 Authors

     Vlad Seryakov vlad@crystalballinc.com
     Gustaf Neumann neumann@wu-wien.ac.at

